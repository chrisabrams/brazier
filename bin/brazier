#!/usr/bin/env node

var argv = require('minimist')(process.argv.slice(2)),
    Brazier = require('../index'),
    chalk   = require('chalk'),
    path    = require('path'),
    pkg     = require('../package.json'),
    routes  = require('./routes')

var name    = pkg.name,
    version = pkg.version

var prompt = new Brazier.Prompt()

prompt.line(chalk.green('\nBrazier command-line generator version %s\n'), version)

var router = new Brazier.Router({
  appName: name,
  argv: argv,
  routes: routes
})

router.on('route:matched', function(data) {

  var dispatcher = new Brazier.Dispatcher({
    controllerPath: path.join(__dirname, './controllers/')
  })

  dispatcher.dispatch(data)

})

router.start()
